import{k as t,l as e,r as a,m as n,u as i,p as r,q as s,t as o,v as l,x as u,y as c,o as d,c as h,w as f,b as p,z as m,A as v,B as y,C as g,i as b,g as w,D as _,E as k,s as x,a as S,d as C,F as A,h as F}from"./index-D6i_hTCv.js";import{_ as $,r as I}from"./uni-app.es.Chso5W8v.js";import{u as M,_ as T}from"./FooterNav.CcZmmZcX.js";import{a as D,A as z}from"./utils.CPUApmy1.js";const R={canvasId:{type:String,default:null},percent:{type:Number,default:0},size:{type:String,default:"120px"},lineCap:{type:String,default:"round"},strokeWidth:{type:[String,Number],default:6},strokeColor:{type:[String,Array],default:"#2db7f5"},trailWidth:{type:[String,Number],default:6},trailColor:{type:String,default:"#ddd"},dashboard:Boolean,clockwise:{type:Boolean,default:!0},duration:{type:Number,default:300},max:{type:Number,default:100},gapDegree:{type:Number,default:90},gapPosition:{type:String,default:"bottom"},canvas:Boolean};function P(e,a,n=!1){return null==a?Promise.reject("context is null"):(a.context&&(a=a.context),new Promise((i,r)=>{const s=t().in(a).select(e),o=t=>{t?i(t):r("no rect")};n?s.fields({node:!0,size:!0,rect:!0},o).exec():s.boundingClientRect(o).exec()}))}let j=!1;function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O(t,e){for(var a=0;e.length>a;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function G(t,e,a){return e&&O(t.prototype,e),a&&O(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function N(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,i,r=[],s=!0,o=!1;try{for(a=a.call(t);!(s=(n=a.next()).done)&&(r.push(n.value),!e||r.length!==e);s=!0);}catch(l){o=!0,i=l}finally{try{s||null==a.return||a.return()}finally{if(o)throw i}}return r}}(t,e)||V(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(t,e){if(t){if("string"==typeof t)return W(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?W(t,e):void 0}}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=Array(e);e>a;a++)n[a]=t[a];return n}var q=function(t){return/^#.{3,6}$/.test(t)?4===t.length?t.substring(1).split("").map(function(t){return 17*parseInt(t,16)}):[t.substring(1,3),t.substring(3,5),t.substring(5,7)].map(function(t){return parseInt(t,16)}):(console.error("lime-circle: 渐变仅支持hex值"),[0,0,0])},B=function(t){return 1===t.length?"0"+t:t},U=function(t,e,a){var n,i,r,s,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,l=[],u=[],c=function(t){return Math.pow(t/255,o)};for(t=q(t).map(c),e=q(e).map(c),n=0;a>n;n++){for(s=1-(r=n/(a-1)),i=0;3>i;i++)u[i]=B(Math.round(255*Math.pow(t[i]*s+e[i]*r,1/o)).toString(16));l.push("#"+u.join(""))}return l},L=function(){var t=1e-6,e=1-2.7,a=3*.1;function n(t){return((1*t-.75)*t+.75)*t}return function(i){return r=function(e){for(var a,i,r,s=e,o=0;8>o;o++){if(i=n(s)-e,t>Math.abs(i))return s;if(t>Math.abs(a=(3*(r=s)-1.5)*r+.75))break;s-=i/a}var l=1,u=0;for(s=e;l>u;){if(i=n(s)-e,t>Math.abs(i))return s;i>0?l=s:u=s,s=(l+u)/2}return s}(i),((e*r+2.4)*r+a)*r;var r}}(),Y=Symbol("tick"),H=Symbol("tick-handler"),J=Symbol("animations"),K=Symbol("start-times"),Q=Symbol("pause-start"),X=Symbol("pause-time"),Z="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(t){return setTimeout(t,1e3/60)},tt="undefined"!=typeof cancelAnimationFrame?cancelAnimationFrame:function(t){clearTimeout(t)},et=function(){function t(){E(this,t),this.state=void 0,this.state="Initiated",this[J]=new Set,this[K]=new Map}return G(t,[{key:"start",value:function(){var t=this;if("Initiated"===this.state){this.state="Started";var e=Date.now();this[X]=0,this[Y]=function(){var a,n=Date.now(),i=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=V(t))){e&&(t=e);var a=0,n=function(){};return{s:n,n:function(){return t.length>a?{done:!1,value:t[a++]}:{done:!0}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,s=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return r=t.done,t},e:function(t){s=!0,i=t},f:function(){try{r||null==e.return||e.return()}finally{if(s)throw i}}}}(t[J]);try{for(i.s();!(a=i.n()).done;){var r=a.value,s=void 0;(s=t[K].get(r)<e?n-e-r.delay-t[X]:n-t[K].get(r)-r.delay-t[X])>r.duration&&(t[J].delete(r),s=r.duration),s>0&&r.run(s)}}catch(o){i.e(o)}finally{i.f()}t[H]=Z(t[Y])},this[Y]()}}},{key:"pause",value:function(){"Started"===this.state&&(this.state="Paused",this[Q]=Date.now(),tt(this[H]))}},{key:"resume",value:function(){"Paused"===this.state&&(this.state="Started",this[X]+=Date.now()-this[Q],this[Y]())}},{key:"reset",value:function(){this.pause(),this.state="Initiated",this[X]=0,this[Q]=0,this[J]=new Set,this[K]=new Map,this[H]=null}},{key:"add",value:function(t,e){2>arguments.length&&(e=Date.now()),this[J].add(t),this[K].set(t,e)}}]),t}(),at=function(){function t(e,a,n,i,r,s){E(this,t),this.startValue=void 0,this.endValue=void 0,this.duration=void 0,this.timingFunction=void 0,this.delay=void 0,this.template=void 0,r=r||function(t){return t},s=s||function(t){return t},this.startValue=e,this.endValue=a,this.duration=n,this.timingFunction=r,this.delay=i,this.template=s}return G(t,[{key:"run",value:function(t){var e=this.endValue-this.startValue,a=this.timingFunction(t/this.duration);this.template(this.startValue+e*a)}}]),t}(),nt=Math.PI/180,it=function(){function t(e,a){E(this,t),this.canvas=void 0,this.context=void 0,this.current=0,this.size=0,this.pixelRatio=1,this._isConicGradient=!1,this._attrs={percent:0,size:120,lineCap:"round",strokeWidth:6,strokeColor:"#2db7f5",trailWidth:6,trailColor:"#ddd",dashboard:!1,clockwise:!0,duration:300,max:100,beforeAnimate:!0,animate:!0,formatter:"{d}{d}.{d}{d}%",fontSize:"16px",showText:!1,gapDegree:90,gapPosition:"bottom"},this._timer=void 0,this.startTime=0,this.target=0,this._colors=[],this._gradientColors=[],this._rAF=function(t){},this._cAf=function(t){},this.timeline=void 0,this.run=void 0,this.canvas=e,this.run=a.run,this.size=a.size||120,this.pixelRatio=a.pixelRatio||1,this.init(),this.initRaf(),this.timeline=new et}return G(t,[{key:"init",value:function(){var t=this.size,e=this.pixelRatio;if(this.canvas){this.canvas.width=t*e,this.canvas.height=t*e;var a=this.canvas.getContext("2d");this._isConicGradient=!!a.createConicGradient,this.context=a}}},{key:"initRaf",value:function(){var t=this.canvas;"undefined"!=typeof window?(this._rAF=window.requestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},this._cAf=window.cancelAnimationFrame||function(t){window.clearTimeout(t)}):t&&t.requestAnimationFrame?(this._rAF=t.requestAnimationFrame,this._cAf=t.cancelAnimationFrame):(this._rAF=function(t){return setTimeout(t,16.7)},this._cAf=function(t){clearTimeout(t)})}},{key:"setOption",value:function(t){Object.assign(this._attrs,t)}},{key:"set",value:function(t,e){this._attrs[t]=e}},{key:"get",value:function(t){return this._attrs[t]||this.canvas[t]}},{key:"play",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.get("percent");this.target=Math.max(Math.min(e,this.get("max")||100),0),this.createConicGradient(),this.timeline.start(),this.timeline.add(new at(this.current,e,this.get("duration"),0,L,function(e){t.current=1e-4>e?0:e,t.render(t.current),t.run(t.current)}))}},{key:"createConicGradient",value:function(){if(!this._isConicGradient){var t=this._attrs.strokeColor;if("string"!=typeof t&&this._colors!=t&&Array.isArray(t)){var e=N(this.getDeg(),2),a=e[0],n=e[1];this._colors=t,this._gradientColors=[];for(var i=n-a,r=t.length-1,s=Math.floor(i/r),o=0;r>o;o++)i-=s,this._gradientColors=this._gradientColors.concat(U(t[o],t[o+1],o+1===r?s+i:s,1))}}}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.context,a=this.size,n=this.pixelRatio,i=this.getSalce(),r=a/2;e.setTransform(1,0,0,1,0,0),e.clearRect(2*-r,2*-r,4*a,4*a),e.setTransform(i*n,0,0,n,r*n,r*n),this.drawTrail(r),this.drawStroke(r,t),e.draw&&e.draw()}},{key:"drawArc",value:function(t,e,a,n,i){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this._attrs.lineCap,s=this.context;s.beginPath(),s.lineCap=r,s.strokeStyle=e,s.lineWidth=a,s.arc(0,0,t,n,i),s.stroke()}},{key:"getSalce",value:function(){return this.get("clockwise")?1:-1}},{key:"getDeg",value:function(){var t=this._attrs,e=t.gapDegree;t.dashboard||(e=0);var a=(0===e?0:{bottom:0,top:180,left:90,right:-90}[t.gapPosition])+(e>0?90+e/2:-90)+0;return[a,a+(360-e)/360*360]}},{key:"drawTrail",value:function(t){var e=this._attrs,a=e.trailWidth,n=e.trailColor,i=t-a/2,r=N(this.getDeg(),2);this.drawArc(i,n,a,r[0]*nt,r[1]*nt)}},{key:"drawStroke",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e){var a=this._attrs,n=a.strokeWidth,i=a.strokeColor,r=a.max,s=a.dashboard,o=a.lineCap,l=N(this.getDeg(),2),u=l[0],c=l[1],d=t-n/2,h=Math.round((c-u)/r*e);if("string"==typeof i||this._isConicGradient)if(Array.isArray(i)&&this._isConicGradient){var f=this.context.createConicGradient(u,0,0);i.forEach(function(t,e){f.addColorStop(e/(i.length-1),t)}),this.drawArc(d,f,n,u*nt,(h+u)*nt)}else this.drawArc(d,i,n,u*nt,(h+u)*nt);else for(var p=0;h>p;p++)this.drawArc(d,this._gradientColors[p],n,(p+u)*nt,(p+1+u)*nt,s||c!=h+u?o:"butt")}}}]),t}();let rt=function(t,e,a,n){const i=1e-6,r=3*t-3*a+1,s=3*a-6*t,o=3*t,l=3*e-3*n+1,u=3*n-6*e,c=3*e;function d(t){return(3*r*t+2*s)*t+o}function h(t){return((r*t+s)*t+o)*t}return function(t){return e=function(t){let e,a,n=t;for(let o=0;o<8;o++){if(a=h(n)-t,Math.abs(a)<i)return n;if(e=d(n),Math.abs(e)<i)break;n-=a/e}let r=1,s=0;for(n=t;r>s;){if(a=h(n)-t,Math.abs(a)<i)return n;a>0?r=n:s=n,n=(r+s)/2}return n}(t),((l*e+u)*e+c)*e;var e}}(.25,.1,.25,1);const st=Symbol("tick"),ot=Symbol("tick-handler"),lt=Symbol("animations"),ut=Symbol("start-times"),ct=Symbol("pause-start"),dt=Symbol("pause-time"),ht="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(t){return setTimeout(t,1e3/60)},ft="undefined"!=typeof cancelAnimationFrame?cancelAnimationFrame:function(t){clearTimeout(t)};class pt{constructor(){this.state="Initiated",this[lt]=new Set,this[ut]=new Map}start(){if("Initiated"!==this.state)return;this.state="Started";let t=Date.now();this[dt]=0,this[st]=()=>{let e=Date.now();this[lt].forEach(a=>{let n;n=this[ut].get(a)<t?e-t-a.delay-this[dt]:e-this[ut].get(a)-a.delay-this[dt],n>a.duration&&(this[lt].delete(a),n=a.duration),n>0&&a.run(n)}),this[ot]=ht(this[st])},this[st]()}pause(){"Started"===this.state&&(this.state="Paused",this[ct]=Date.now(),ft(this[ot]))}resume(){"Paused"===this.state&&(this.state="Started",this[dt]+=Date.now()-this[ct],this[st]())}reset(){this.pause(),this.state="Initiated",this[dt]=0,this[ct]=0,this[lt]=new Set,this[ut]=new Map,this[ot]=null}add(t,e){arguments.length<2&&(e=Date.now()),this[lt].add(t),this[ut].set(t,e)}}class mt{constructor(t,e,a,n,i,r){i=i||(t=>t),r=r||(t=>t),this.startValue=t,this.endValue=e,this.duration=a,this.timingFunction=i,this.delay=n,this.template=r}run(t){let e=this.endValue-this.startValue,a=t/this.duration;1!=a&&(a=this.timingFunction(a)),this.template(this.startValue+e*a)}}function vt(t){return/^(-)?\d+(\.\d+)?$/.test(t)}function yt(t){return function(t){return null!=t}(t)?vt(t=String(t))?`${t}px`:t:null}function gt(t){return"string"==typeof t}function bt(t,e=0){if(vt(t))return Number(t);if(gt(t)){const a=/^-?([0-9]+)?([.]{1}[0-9]+){0,1}(em|rpx|px|%)$/g.exec(t);if(!t||!a)return 0;const n=a[3],r=parseFloat(t);if("rpx"===n)return i(r);if("px"===n)return 1*r;if("%"==n)return r/100*e}return 0}function wt(t,e,a,n,i,r,s){const o=0===n?0:{bottom:0,top:180,left:90,right:-90}[i],l=n>0?90+n/2:-90,u=function(t,e){const a=bt(t),n=bt(e);return{s:a,w:n,c:(a-n)/2,r:a/2-n}}(e,s),c=(360-n)/360*a*100,d=o+l+90,h=function(t=0){return`radial-gradient(transparent ${t-.5}px, #000 ${t}px)`}(u.r);let f="",p="",m="";if(gt(r))p=r,m=r,f=`conic-gradient(from ${d}deg, ${p} 0%, ${p} ${c}%, transparent ${c}%, transparent 100%)`;else if(Array.isArray(r)){f=`conic-gradient(from ${d}deg, transparent 0%,`;const t=r.length;for(let e=0;e<t;e++){const a=r[e];0===e?(f+=`${a} 0%,`,p=a):f+=`${a} ${c*(e+1)/t}%,`,e==t-1&&(m=a)}f+=`transparent ${c}%, transparent 100%)`}return{color:p,[`--l-circle-${t}-cap-start`]:`${d}deg`,[`--l-circle-${t}-cap-color-end`]:m,[`--l-circle-${t}-cap-end`]:`${c/100*360+d}deg`,[`--l-circle-${t}-cap-size`]:s/2+"px",mask:h,"-webkit-mask":h,"--l-background":f}}const _t=$(r({name:"l-circle",props:R,emits:["update:current"],setup(t,{emit:i}){const r=u(),d=a(t.canvas),h=Math.random().toString(16).slice(2),f=`l-circle-${t.canvasId||r.uid+h}`;let p=null;const m=a(0),v=a(0),y=function(t,e){const i=a(0),{immediate:r,duration:s=300}=e;let o=null,l=-1;return n("function"==typeof t?t:()=>t.value,t=>{null==o&&(o=new pt),o.start(),o.add(new mt(i.value,t,s,0,rt,e=>{i.value=e,clearTimeout(l),i.value==t&&(l=setTimeout(()=>{null==o||o.pause(),o=null},s))}))},{immediate:r}),i}(m,{duration:t.duration}),g=s(()=>({width:yt(t.size),height:yt(t.size),"--l-circle-offset-top":!d.value&&v.value})),b=s(()=>{const{clockwise:e,lineCap:a}=t;return a?`is-${a} `:" "+!e&&!d.value&&"clockwise"}),w=s(()=>[bt(t.trailWidth),bt(t.strokeWidth)]),_=s(()=>{const{size:e,trailColor:a,dashboard:n,gapDegree:i,gapPosition:r}=t;return wt("trail",e,1,n?i:0,r,a,w.value[0])}),k=s(()=>{const{size:e,strokeColor:a,dashboard:n,max:i,gapDegree:r,gapPosition:s}=t;return wt("stroke",e,Math.min(y.value/t.max,1),n?r:0,s,a,w.value[1])}),x=n(()=>t.percent,e=>{m.value=Math.min(e,t.max),p&&p.play(e)}),S=n(y,t=>{i("update:current",t.toFixed(2))});return o(()=>{P(".check",r.proxy).then(a=>{d.value=!(a.height>0&&!t.canvas),d.value&&setTimeout(()=>{(async function(t,a){let{context:n}=a;return P("#"+t,n,j).then(({node:a})=>{if(a)return a;{j=!1;const a=e(t,n);return{getContext(t){if("2d"==t)return a}}}})})(f,{context:r.proxy}).then(e=>{p=new it(e,{size:bt(t.size),run:t=>y.value=t,pixelRatio:j?c().pixelRatio:1}),p.setOption(Object.assign({},t,{trailWidth:w.value[0],strokeWidth:w.value[1]})),p.play(t.percent)})},50),m.value=t.percent})}),l(()=>{x(),S()}),{useCanvas:d,innerCanvasId:f,classes:b,styles:g,trailStyles:_,strokeStyles:k,current:y}}}),[["render",function(t,e,a,n,i,r){const s=b,o=w,l=_;return d(),h(s,{class:g(["l-circle",[{clockwise:!t.clockwise&&!t.useCanvas},["is-"+t.lineCap]]]),style:m([t.styles])},{default:f(()=>[p(s,{class:"check"}),t.useCanvas?v("",!0):(d(),h(s,{key:0,class:"l-circle__trail",style:m([t.trailStyles])},{default:f(()=>[p(o,{class:"cap start"}),p(o,{class:"cap end"})]),_:1},8,["style"])),t.useCanvas?v("",!0):(d(),h(s,{key:1,class:"l-circle__stroke",style:m([t.strokeStyles])},{default:f(()=>[p(s,{class:"l-circle__stroke-line"}),t.current?(d(),h(o,{key:0,class:"cap start"})):v("",!0),t.current?(d(),h(o,{key:1,class:"cap end"})):v("",!0)]),_:1},8,["style"])),t.useCanvas?(d(),h(l,{key:2,type:"2d","canvas-id":t.innerCanvasId,id:t.innerCanvasId,class:"l-circle__canvas"},null,8,["canvas-id","id"])):v("",!0),p(s,{class:"l-circle__inner"},{default:f(()=>[y(t.$slots,"default",{},void 0,!0)]),_:3})]),_:3},8,["class","style"])}],["__scopeId","data-v-c82ed766"]]),kt=$({__name:"home",setup(t){const e=M();function n(t){return e.convertText(t)}const i=a(""),r=a(""),s=a(""),l=a(""),u=a(1),c=a("");a("http://darkskl.site:9495");const m=a(""),v=a("");async function y(){try{const t=await D(z.GRABORDER);0==t.data.data.code?x({title:n("抢单成功")}):x({title:n(t.data.msg)})}catch(t){console.error("抢单请求失败：",t),x({title:n("网络异常，请重试"),icon:"none"})}}c.value=k("token"),o(async()=>{try{const t=await D(z.USER_GETINFO);m.value=t.data.data.userInfo.nickName}catch(t){console.error("昵称请求失败：",t)}try{const t=await D(z.GET_USER_STORE_INFO_BY_SELF_ID);r.value=t.data.data.saving,i.value=t.data.data.revenues,v.value=t.data.data.maxOrderCapacity,l.value=t.data.data.commodityCount,s.value=function(t){const e=v.value;return Math.min(t/e*100,100)}(l.value)}catch(t){x({title:res.data.msg,icon:"error"})}});const g=a([{text:"首页",url:"/pages/home/home"},{text:"客服",url:"/pages/service/service"},{text:"记录",url:"/pages/record/record"},{text:"个人",url:"/pages/user/user"}]);return(t,e)=>{const a=b,o=w,c=I(S("l-circle"),_t),_=F,k=I(S("FooterNav"),T);return d(),h(a,{class:"home-page"},{default:f(()=>[p(a,{class:"bg-decoration"},{default:f(()=>[p(a,{class:"bg-blob blob-1"}),p(a,{class:"bg-blob blob-2"})]),_:1}),p(a,{class:"user-info-card"},{default:f(()=>[p(a,{class:"info-header"},{default:f(()=>[p(c,{current:u.value,"onUpdate:current":e[0]||(e[0]=t=>u.value=t),percent:s.value},{default:f(()=>[p(o,null,{default:f(()=>[C(A(l.value)+"/"+A(v.value),1)]),_:1})]),_:1},8,["current","percent"]),p(a,{class:"info-details"},{default:f(()=>[p(o,{class:"greeting",style:{"font-size":"40rpx"}},{default:f(()=>[C(A(n("您好"))+"，"+A(m.value),1)]),_:1}),p(o,{class:"balance",style:{"font-size":"30rpx"}},{default:f(()=>[C(A(n("总余额：RMB"))+" "+A(r.value),1)]),_:1}),p(o,{class:"income",style:{"font-size":"30rpx"}},{default:f(()=>[C(A(n("收益：RMB"))+" "+A(i.value),1)]),_:1})]),_:1})]),_:1}),p(a,{class:"info-footer"},{default:f(()=>[p(o,{class:"operate-time"},{default:f(()=>[C(A(n("平台运营时间每日10:00至22:00。如需帮助，请联络平台客服。")),1)]),_:1}),p(_,{class:"start-btn",onClick:y},{default:f(()=>[C(A(n("开始抢单")),1)]),_:1})]),_:1})]),_:1}),p(k,{navs:g.value},null,8,["navs"])]),_:1})}}},[["__scopeId","data-v-1f0754bd"]]);export{kt as default};
