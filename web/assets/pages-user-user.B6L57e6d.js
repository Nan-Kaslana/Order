import{r as e,m as a,q as s,a as t,c as l,w as c,i as o,o as i,b as n,d as u,t as r,u as d,v as f,F as m,A as p,B as v,f as g,C as _,s as x,D as b,E as h,g as k,x as y,n as z}from"./index-DE4krAnL.js";import{u as w}from"./lang.pabbPAZ7.js";import{_ as A}from"./_plugin-vue_export-helper.BCo6x5W8.js";const C=A({__name:"user",setup(A){const C=w(),I=e(""),F=e("http://darkskl.site:9495");I.value=a("token");const T=e(""),D=e(""),j=e("");s({url:F.value+"/user/getUserInfo",method:"GET",header:{"x-token":I.value},success:e=>{j.value=e.data.data.userInfo.ID,D.value=e.data.data.userInfo.nickName}});const N=e([{text:"首页",url:"/pages/home/home"},{text:"客服",url:"/pages/service/service"},{text:"记录",url:"/pages/record/record"},{text:"个人",url:"/pages/user/user"}]);function P(){C.toggleLang()}function U(e){return C.convertText(e)}function E(){p({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:e=>{v({url:F.value+"/fileUploadAndDownload/upload",filePath:e.tempFilePaths[0],name:"file",header:{"x-token":I.value},success:e=>{const a=JSON.parse(e.data);T.value=F.value+"/"+a.data.file.url}}),g({title:U("头像已更新"),icon:"success"})}})}function S(){E()}function q(){_({title:U("修改用户名"),editable:!0,placeholderText:U("请输入新用户名"),success:e=>{e.confirm&&e.content&&(D.value=e.content,s({url:F.value+"/user/setSelfInfo",method:"PUT",header:{"x-token":I.value},data:{nickName:e.content}}),g({title:U("用户名已更新"),icon:"success"}))}})}function B(){_({title:U("确认退出"),content:U("确定要退出当前账号吗？"),success:e=>{e.confirm&&(x("token",""),b({url:"/pages/index/index"}))}})}return(e,a)=>{const s=o,p=h,v=t("uni-icons"),g=k,_=t("uni-badge");return i(),l(s,{class:"home-page"},{default:c(()=>[n(s,{class:"bg-decoration"},{default:c(()=>[n(s,{class:"bg-blob blob-1"}),n(s,{class:"bg-blob blob-2"})]),_:1}),n(s,{class:"user-info-card"},{default:c(()=>[n(s,{class:"avatar-section"},{default:c(()=>[n(s,{class:"avatar-container"},{default:c(()=>[n(p,{class:"avatar",src:T.value,mode:"widthFix"},null,8,["src"]),n(s,{class:"avatar-edit",onClick:E},{default:c(()=>[n(v,{type:"camera",size:"16",color:"#fff"})]),_:1})]),_:1}),n(s,{class:"user-basic"},{default:c(()=>[n(g,{class:"user-name"},{default:c(()=>[u(r(U(D.value)),1)]),_:1}),n(g,{class:"user-id"},{default:c(()=>[u(r(U("ID:"))+" "+r(j.value),1)]),_:1})]),_:1})]),_:1}),n(s,{class:"function-list"},{default:c(()=>[n(s,{class:"function-item",onClick:S},{default:c(()=>[n(v,{type:"image",size:"20",color:"#4A35A8",class:"item-icon"}),n(g,{class:"item-text"},{default:c(()=>[u(r(U("修改头像")),1)]),_:1}),n(v,{type:"right",size:"18",color:"#999",class:"item-arrow"})]),_:1}),n(s,{class:"function-item",onClick:q},{default:c(()=>[n(v,{type:"edit",size:"20",color:"#4A35A8",class:"item-icon"}),n(g,{class:"item-text"},{default:c(()=>[u(r(U("修改用户名")),1)]),_:1}),n(v,{type:"right",size:"18",color:"#999",class:"item-arrow"})]),_:1}),n(s,{class:"function-item",onClick:P},{default:c(()=>[n(v,{type:"translate",size:"20",color:"#4A35A8",class:"item-icon"}),n(g,{class:"item-text"},{default:c(()=>[u(r(U("繁体/简体切换")),1)]),_:1}),n(v,{type:"right",size:"18",color:"#999",class:"item-arrow"})]),_:1}),n(s,{class:"function-item logout-item",onClick:B},{default:c(()=>[n(v,{type:"logout",size:"20",color:"#F53F3F",class:"item-icon"}),n(g,{class:"item-text logout-text"},{default:c(()=>[u(r(U("退出登录")),1)]),_:1}),n(v,{type:"right",size:"18",color:"#999",class:"item-arrow"})]),_:1})]),_:1})]),_:1}),n(s,{class:"footer-nav"},{default:c(()=>[(i(!0),d(m,null,f(N.value,(e,a)=>(i(),l(s,{class:"nav-item",key:a,onClick:a=>{return s=e.url,void z({url:s});var s}},{default:c(()=>[e.badge?(i(),l(_,{key:0,text:e.badge,type:"warning",class:"nav-badge"},null,8,["text"])):y("",!0),n(v,{type:e.icon,size:"24",class:"nav-icon"},null,8,["type"]),n(g,{class:"nav-text"},{default:c(()=>[u(r(U(e.text)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})}}},[["__scopeId","data-v-016767b9"]]);export{C as default};
