import{r as t,L as e,v as n,f as s,A as r,s as a,t as u,a as i,c as o,w as c,i as l,o as f,b as d,d as h,G as m,H as $,J as p,K as v,C as y,M as _,N as g,O as M,P as D,Q as w,h as k,j as b,E as S}from"./index-B3ir4qvj.js";import{r as O,_ as C}from"./uni-app.es.B7CJl36A.js";import{u as x,_ as Y}from"./FooterNav.CvHX5To4.js";import{_ as T}from"./_plugin-vue_export-helper.BCo6x5W8.js";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function H(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var j={exports:{}};const L=H(j.exports=function(){var t=1e3,e=6e4,n=36e5,s="millisecond",r="second",a="minute",u="hour",i="day",o="week",c="month",l="quarter",f="year",d="date",h="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,$=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},v=function(t,e,n){var s=String(t);return!s||s.length>=e?t:""+Array(e+1-s.length).join(n)+t},y={s:v,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),s=Math.floor(n/60),r=n%60;return(e<=0?"+":"-")+v(s,2,"0")+":"+v(r,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var s=12*(n.year()-e.year())+(n.month()-e.month()),r=e.clone().add(s,c),a=n-r<0,u=e.clone().add(s+(a?-1:1),c);return+(-(s+(n-r)/(a?r-u:u-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:f,w:o,d:i,D:d,h:u,m:a,s:r,ms:s,Q:l}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},_="en",g={};g[_]=p;var M="$isDayjsObject",D=function(t){return t instanceof S||!(!t||!t[M])},w=function t(e,n,s){var r;if(!e)return _;if("string"==typeof e){var a=e.toLowerCase();g[a]&&(r=a),n&&(g[a]=n,r=a);var u=e.split("-");if(!r&&u.length>1)return t(u[0])}else{var i=e.name;g[i]=e,r=i}return!s&&r&&(_=r),r||!s&&_},k=function(t,e){if(D(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new S(n)},b=y;b.l=w,b.i=D,b.w=function(t,e){return k(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var S=function(){function p(t){this.$L=w(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[M]=!0}var v=p.prototype;return v.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var s=e.match(m);if(s){var r=s[2]-1||0,a=(s[7]||"0").substring(0,3);return n?new Date(Date.UTC(s[1],r,s[3]||1,s[4]||0,s[5]||0,s[6]||0,a)):new Date(s[1],r,s[3]||1,s[4]||0,s[5]||0,s[6]||0,a)}}return new Date(e)}(t),this.init()},v.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},v.$utils=function(){return b},v.isValid=function(){return!(this.$d.toString()===h)},v.isSame=function(t,e){var n=k(t);return this.startOf(e)<=n&&n<=this.endOf(e)},v.isAfter=function(t,e){return k(t)<this.startOf(e)},v.isBefore=function(t,e){return this.endOf(e)<k(t)},v.$g=function(t,e,n){return b.u(t)?this[e]:this.set(n,t)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(t,e){var n=this,s=!!b.u(e)||e,l=b.p(t),h=function(t,e){var r=b.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return s?r:r.endOf(i)},m=function(t,e){return b.w(n.toDate()[t].apply(n.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},$=this.$W,p=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(l){case f:return s?h(1,0):h(31,11);case c:return s?h(1,p):h(0,p+1);case o:var _=this.$locale().weekStart||0,g=($<_?$+7:$)-_;return h(s?v-g:v+(6-g),p);case i:case d:return m(y+"Hours",0);case u:return m(y+"Minutes",1);case a:return m(y+"Seconds",2);case r:return m(y+"Milliseconds",3);default:return this.clone()}},v.endOf=function(t){return this.startOf(t,!1)},v.$set=function(t,e){var n,o=b.p(t),l="set"+(this.$u?"UTC":""),h=(n={},n[i]=l+"Date",n[d]=l+"Date",n[c]=l+"Month",n[f]=l+"FullYear",n[u]=l+"Hours",n[a]=l+"Minutes",n[r]=l+"Seconds",n[s]=l+"Milliseconds",n)[o],m=o===i?this.$D+(e-this.$W):e;if(o===c||o===f){var $=this.clone().set(d,1);$.$d[h](m),$.init(),this.$d=$.set(d,Math.min(this.$D,$.daysInMonth())).$d}else h&&this.$d[h](m);return this.init(),this},v.set=function(t,e){return this.clone().$set(t,e)},v.get=function(t){return this[b.p(t)]()},v.add=function(s,l){var d,h=this;s=Number(s);var m=b.p(l),$=function(t){var e=k(h);return b.w(e.date(e.date()+Math.round(t*s)),h)};if(m===c)return this.set(c,this.$M+s);if(m===f)return this.set(f,this.$y+s);if(m===i)return $(1);if(m===o)return $(7);var p=(d={},d[a]=e,d[u]=n,d[r]=t,d)[m]||1,v=this.$d.getTime()+s*p;return b.w(v,this)},v.subtract=function(t,e){return this.add(-1*t,e)},v.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var s=t||"YYYY-MM-DDTHH:mm:ssZ",r=b.z(this),a=this.$H,u=this.$m,i=this.$M,o=n.weekdays,c=n.months,l=n.meridiem,f=function(t,n,r,a){return t&&(t[n]||t(e,s))||r[n].slice(0,a)},d=function(t){return b.s(a%12||12,t,"0")},m=l||function(t,e,n){var s=t<12?"AM":"PM";return n?s.toLowerCase():s};return s.replace($,function(t,s){return s||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return b.s(e.$y,4,"0");case"M":return i+1;case"MM":return b.s(i+1,2,"0");case"MMM":return f(n.monthsShort,i,c,3);case"MMMM":return f(c,i);case"D":return e.$D;case"DD":return b.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return f(n.weekdaysMin,e.$W,o,2);case"ddd":return f(n.weekdaysShort,e.$W,o,3);case"dddd":return o[e.$W];case"H":return String(a);case"HH":return b.s(a,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return m(a,u,!0);case"A":return m(a,u,!1);case"m":return String(u);case"mm":return b.s(u,2,"0");case"s":return String(e.$s);case"ss":return b.s(e.$s,2,"0");case"SSS":return b.s(e.$ms,3,"0");case"Z":return r}return null}(t)||r.replace(":","")})},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(s,d,h){var m,$=this,p=b.p(d),v=k(s),y=(v.utcOffset()-this.utcOffset())*e,_=this-v,g=function(){return b.m($,v)};switch(p){case f:m=g()/12;break;case c:m=g();break;case l:m=g()/3;break;case o:m=(_-y)/6048e5;break;case i:m=(_-y)/864e5;break;case u:m=_/n;break;case a:m=_/e;break;case r:m=_/t;break;default:m=_}return h?m:b.a(m)},v.daysInMonth=function(){return this.endOf(c).$D},v.$locale=function(){return g[this.$L]},v.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),s=w(t,e,!0);return s&&(n.$L=s),n},v.clone=function(){return b.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},p}(),O=S.prototype;return k.prototype=O,[["$ms",s],["$s",r],["$m",a],["$H",u],["$W",i],["$M",c],["$y",f],["$D",d]].forEach(function(t){O[t[1]]=function(e){return this.$g(e,t[0],t[1])}}),k.extend=function(t,e){return t.$i||(t(e,S,k),t.$i=!0),k},k.locale=w,k.isDayjs=D,k.unix=function(t){return k(1e3*t)},k.en=g[_],k.Ls=g,k.p={},k}()),N=T({__name:"record",setup(T){const H=x();function j(t){return H.convertText(t)}const N=t(["全部","待支付","已冻结","已完成"]),A=t(0),I=t([]),W=t([{text:"首页",url:"/pages/home/home"},{text:"客服",url:"/pages/service/service"},{text:"记录",url:"/pages/record/record"},{text:"个人",url:"/pages/user/user"}]),F=t(!1),P=e({});function q(){F.value=!1}const E=t(""),U=t(!1),J=["商品质量很好","发货速度快","客服态度不错","性价比高","体验一般"];const z=t("");async function B(){try{D({url:`http://darkskl.site:9495/commodityOrder/submitOrderEvaluation?evaluation=${E.value}&orderId=${z.value}`,method:"GET",header:{"x-token":w("token")},success:t=>{console.log(t.data),a({title:"提交成功",icon:"success"})}})}catch(t){console.error(t)}}n(async()=>{try{const t=(await s(r.USER_BYSELFLD)).data.data.orders;I.value=t.map(t=>{const e=L(t.CreatedAt).format("YYYY-MM-DD HH:mm:ss"),n=t.Commodity;return z.value=t.ID,n?{time:e,status:t.status,name:n.commodifyName,price:n.serllingPrice,quantity:t.quantity,commission:(Number(n.serllingPrice)*t.quantity*Number(n.commissionRate)).toFixed(2)}:null}).filter(t=>t)}catch(t){a({title:j("网络异常，请重试"),icon:"none"})}});const R=u(()=>{if(0===A.value)return I.value;const t={1:"waitPayment",2:"cancel",3:"default"};return I.value.filter(e=>e.status===t[A.value])});return(t,e)=>{const n=l,s=O(i("uni-icons"),C),r=k,a=b,u=O(i("FooterNav"),Y);return f(),o(n,{class:"record-page"},{default:c(()=>[d(n,{class:"custom-header"},{default:c(()=>[d(n,{class:"header-content"},{default:c(()=>[h(m(j("订单记录")),1)]),_:1})]),_:1}),d(n,{class:"tab-bar"},{default:c(()=>[(f(!0),$(v,null,p(N.value,(t,e)=>(f(),o(n,{key:e,onClick:t=>A.value=e,class:S(["tab-item",{active:A.value===e}])},{default:c(()=>[h(m(j(t)),1)]),_:2},1032,["onClick","class"]))),128))]),_:1}),d(n,{class:"order-list"},{default:c(()=>[0===R.value.length?(f(),o(n,{key:0,class:"empty-state"},{default:c(()=>[d(s,{type:"folder-open",size:"60",class:"empty-icon"}),d(r,null,{default:c(()=>[h(m(j("暂无订单记录")),1)]),_:1})]),_:1})):y("",!0),(f(!0),$(v,null,p(R.value,(t,e)=>(f(),o(n,{key:e,class:"order-item",onClick:e=>function(t){Object.assign(P,t),F.value=!0}(t)},{default:c(()=>[d(n,{class:"order-header"},{default:c(()=>[d(n,{class:"order-time"},{default:c(()=>[h(m(t.time),1)]),_:2},1024),d(n,{class:S(["status-tag",`status-${t.status}`])},{default:c(()=>["default"===t.status?(f(),o(r,{key:0},{default:c(()=>[h(m(j("已完成")),1)]),_:1})):"default"===t.status?(f(),o(r,{key:1},{default:c(()=>[h(m(j("全部")),1)]),_:1})):"waitPayment"===t.status?(f(),o(r,{key:2},{default:c(()=>[h(m(j("待支付")),1)]),_:1})):"cancel"===t.status?(f(),o(r,{key:3},{default:c(()=>[h(m(j("已冻结")),1)]),_:1})):(f(),o(r,{key:4},{default:c(()=>[h(m(j("未知")),1)]),_:1}))]),_:2},1032,["class"])]),_:2},1024),d(n,{class:"order-content"},{default:c(()=>[d(n,{class:"order-name"},{default:c(()=>[h(m(t.name),1)]),_:2},1024),d(n,{class:"order-details"},{default:c(()=>[d(r,null,{default:c(()=>[h(m(j("RMB"))+"："+m(t.price),1)]),_:2},1024),d(r,null,{default:c(()=>[h(m(j("数量"))+"："+m(t.quantity),1)]),_:2},1024)]),_:2},1024),d(n,{class:"commission"},{default:c(()=>[h(m(j("佣金"))+"："+m(j("RMB"))+" "+m(t.commission),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}),_(d(n,{class:"popup-overlay",onClick:M(q,["self"])},{default:c(()=>[d(n,{class:"popup-content"},{default:c(()=>[d(n,{class:"close-btn",onClick:q},{default:c(()=>[h("×")]),_:1}),d(n,{class:"popup-title"},{default:c(()=>[h(m(P.name),1)]),_:1}),d(n,{class:"popup-info"},{default:c(()=>[d(r,null,{default:c(()=>[h("价格："+m(P.price),1)]),_:1}),d(r,null,{default:c(()=>[h("数量："+m(P.quantity),1)]),_:1}),d(r,null,{default:c(()=>[h("佣金："+m(P.commission),1)]),_:1}),d(r,null,{default:c(()=>[h("时间："+m(P.time),1)]),_:1})]),_:1}),d(n,{class:"evaluation-section"},{default:c(()=>[d(n,{class:"rating-input",onClick:e[0]||(e[0]=t=>U.value=!U.value)},{default:c(()=>[h(m(E.value||"请选择评价内容"),1)]),_:1}),U.value?(f(),o(n,{key:0,class:"dropdown"},{default:c(()=>[(f(),$(v,null,p(J,(t,e)=>d(n,{key:e,class:"dropdown-item",onClick:e=>function(t){E.value=t,U.value=!1}(t)},{default:c(()=>[h(m(t),1)]),_:2},1032,["onClick"])),64))]),_:1})):y("",!0),d(a,{class:"submit-btn",onClick:B},{default:c(()=>[h("提交")]),_:1})]),_:1})]),_:1})]),_:1},512),[[g,F.value]]),d(u,{navs:W.value},null,8,["navs"])]),_:1})}}},[["__scopeId","data-v-73490902"]]);export{N as default};
