import{r as a,a as e,c as l,w as s,i as t,o,b as c,d as n,e as u,s as i,f as d,A as r,g as p,n as f,h as g,I as _,j as m}from"./index-B3ir4qvj.js";import{o as v,r as b,_ as h}from"./uni-app.es.B7CJl36A.js";import{_ as k}from"./_plugin-vue_export-helper.BCo6x5W8.js";const w=k({__name:"index",setup(k){const w=a(""),y=a(""),V=a(""),I=a(""),x=a("");async function C(){if(console.log("成功执行"),""!=w.value&&""!=y.value)if(""!=V.value)try{const a=await d(r.USER_LOGIN,{userName:w.value,password:y.value,captcha:V.value,captchaId:I.value});console.log(a.data),0==a.data.code?(p("token",a.data.data.token),f({url:"/pages/home/home"})):i({title:a.data.msg,icon:"none"})}catch(a){console.error("登录请求失败：",a),i({title:"网络异常，请重试",icon:"none"})}else i({title:"验证码为空",icon:"none"});else i({title:"用户名或密码为空",icon:"none"})}async function U(){console.log("成功执行");try{const a=await d(r.USER_CAPTCHA);console.log(a.data),console.log(a.data),I.value=a.data.data.captchaId,console.log(a.data.data.captchaId),x.value=a.data.data.picPath,console.log(I)}catch(a){console.error("登录请求失败：",a),i({title:"网络异常，请重试",icon:"none"})}}function j(){console.log("成功执行"),f({url:"/pages/register/register"})}return a("http://darkskl.site:9495"),v(a=>{w.value=a.userName,y.value=a.password}),(a,i)=>{const d=t,r=g,p=b(e("uni-icons"),h),f=_,v=m;return o(),l(d,{class:"login-page"},{default:s(()=>[c(d,{class:"bg-decoration"},{default:s(()=>[c(d,{class:"bg-blob blob-1"}),c(d,{class:"bg-blob blob-2"})]),_:1}),c(d,{class:"login-card card-animate"},{default:s(()=>[c(d,{class:"card-header"},{default:s(()=>[c(r,{class:"login-title"},{default:s(()=>[n("欢迎回来")]),_:1}),c(r,{class:"login-subtitle"},{default:s(()=>[n("请登录您的账号")]),_:1})]),_:1}),c(d,{class:"form-container"},{default:s(()=>[c(d,{class:"input-group"},{default:s(()=>[c(d,{class:"input-wrap"},{default:s(()=>[c(p,{type:"person",size:"24",class:"input-icon"}),c(f,{type:"text",placeholder:"请输入用户名",class:"input-field",modelValue:w.value,"onUpdate:modelValue":i[0]||(i[0]=a=>w.value=a)},null,8,["modelValue"])]),_:1})]),_:1}),c(d,{class:"input-group"},{default:s(()=>[c(d,{class:"input-wrap"},{default:s(()=>[c(p,{type:"locked",size:"24",class:"input-icon"}),c(f,{type:"password",placeholder:"请输入密码",class:"input-field",modelValue:y.value,"onUpdate:modelValue":i[1]||(i[1]=a=>y.value=a)},null,8,["modelValue"]),c(d,{class:"password-toggle"})]),_:1})]),_:1}),c(d,{class:"input-group"},{default:s(()=>[c(d,{class:"input-wrap"},{default:s(()=>[c(p,{type:"lock",size:"24",class:"input-icon"}),c(f,{placeholder:"请输入验证码",class:"input-field",modelValue:V.value,"onUpdate:modelValue":i[2]||(i[2]=a=>V.value=a)},null,8,["modelValue"]),c(v,{onClick:U},{default:s(()=>[n("获取验证码")]),_:1})]),_:1})]),_:1})]),_:1}),u("img",{src:x.value},null,8,["src"]),c(v,{class:"login-btn",onClick:C},{default:s(()=>[n(" 立即登录 "),c(p,{size:"24",class:"btn-icon"})]),_:1})]),_:1}),c(d,{class:"register-tip"},{default:s(()=>[c(r,null,{default:s(()=>[n("还没有账号?")]),_:1}),c(r,{class:"register-link",onClick:j},{default:s(()=>[n("立即注册")]),_:1})]),_:1})]),_:1})}}},[["__scopeId","data-v-c5c5b82c"]]);export{w as default};
