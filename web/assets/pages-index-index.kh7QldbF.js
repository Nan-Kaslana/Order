import{r as a,a as l,c as e,w as s,i as t,o,b as c,d as n,e as u,s as i,f as d,n as r,g as p,I as f,h as g}from"./index-D6i_hTCv.js";import{_,o as m,r as v,a as b}from"./uni-app.es.Chso5W8v.js";import{a as h,A as k}from"./utils.CPUApmy1.js";const w=_({__name:"index",setup(_){const w=a(""),y=a(""),V=a(""),I=a(""),C=a("");async function U(){if(console.log("成功执行"),""!=w.value&&""!=y.value)if(""!=V.value)try{const a=await h(k.USER_LOGIN,{userName:w.value,password:y.value,captcha:V.value,captchaId:I.value});console.log(a.data),0==a.data.code?(d("token",a.data.data.token),r({url:"/pages/home/home"})):i({title:a.data.msg,icon:"none"})}catch(a){console.error("登录请求失败：",a),i({title:"网络异常，请重试",icon:"none"})}else i({title:"验证码为空",icon:"none"});else i({title:"用户名或密码为空",icon:"none"})}async function x(){console.log("成功执行");try{const a=await h(k.USER_CAPTCHA);console.log(a.data),console.log(a.data),I.value=a.data.data.captchaId,console.log(a.data.data.captchaId),C.value=a.data.data.picPath,console.log(I)}catch(a){console.error("登录请求失败：",a),i({title:"网络异常，请重试",icon:"none"})}}function z(){console.log("成功执行"),r({url:"/pages/register/register"})}return a("http://darkskl.site:9495"),m(a=>{w.value=a.userName,y.value=a.password}),(a,i)=>{const d=t,r=p,_=v(l("uni-icons"),b),m=f,h=g;return o(),e(d,{class:"login-page"},{default:s(()=>[c(d,{class:"bg-decoration"},{default:s(()=>[c(d,{class:"bg-blob blob-1"}),c(d,{class:"bg-blob blob-2"})]),_:1}),c(d,{class:"login-card card-animate"},{default:s(()=>[c(d,{class:"card-header"},{default:s(()=>[c(r,{class:"login-title"},{default:s(()=>[n("欢迎回来")]),_:1}),c(r,{class:"login-subtitle"},{default:s(()=>[n("请登录您的账号")]),_:1})]),_:1}),c(d,{class:"form-container"},{default:s(()=>[c(d,{class:"input-group"},{default:s(()=>[c(d,{class:"input-wrap"},{default:s(()=>[c(_,{type:"person",size:"24",class:"input-icon"}),c(m,{type:"text",placeholder:"请输入用户名",class:"input-field",modelValue:w.value,"onUpdate:modelValue":i[0]||(i[0]=a=>w.value=a)},null,8,["modelValue"])]),_:1})]),_:1}),c(d,{class:"input-group"},{default:s(()=>[c(d,{class:"input-wrap"},{default:s(()=>[c(_,{type:"locked",size:"24",class:"input-icon"}),c(m,{type:"password",placeholder:"请输入密码",class:"input-field",modelValue:y.value,"onUpdate:modelValue":i[1]||(i[1]=a=>y.value=a)},null,8,["modelValue"]),c(d,{class:"password-toggle"})]),_:1})]),_:1}),c(d,{class:"input-group"},{default:s(()=>[c(d,{class:"input-wrap"},{default:s(()=>[c(_,{type:"lock",size:"24",class:"input-icon"}),c(m,{placeholder:"请输入验证码",class:"input-field",modelValue:V.value,"onUpdate:modelValue":i[2]||(i[2]=a=>V.value=a)},null,8,["modelValue"]),c(h,{onClick:x},{default:s(()=>[n("获取验证码")]),_:1})]),_:1})]),_:1})]),_:1}),u("img",{src:C.value},null,8,["src"]),c(h,{class:"login-btn",onClick:U},{default:s(()=>[n(" 立即登录 "),c(_,{size:"24",class:"btn-icon"})]),_:1})]),_:1}),c(d,{class:"register-tip"},{default:s(()=>[c(r,null,{default:s(()=>[n("还没有账号?")]),_:1}),c(r,{class:"register-link",onClick:z},{default:s(()=>[n("立即注册")]),_:1})]),_:1})]),_:1})}}},[["__scopeId","data-v-c5c5b82c"]]);export{w as default};
