import{r as e,E as s,O as a,a as t,c as l,w as o,i as c,o as i,b as u,d as r,F as n,Q as d,s as f,f as m,R as p,S as v,g,T as _,U as x}from"./index-D6i_hTCv.js";import{_ as h,r as b,a as k}from"./uni-app.es.Chso5W8v.js";import{u as y,_ as z}from"./FooterNav.CcZmmZcX.js";const F=h({__name:"user",setup(h){const F=y(),w=e(""),A=e("http://darkskl.site:9495");w.value=s("token");const I=e(""),T=e(""),N=e("");a({url:A.value+"/user/getUserInfo",method:"GET",header:{"x-token":w.value},success:e=>{N.value=e.data.data.userInfo.ID,T.value=e.data.data.userInfo.nickName}});const C=e([{text:"首页",url:"/pages/home/home"},{text:"客服",url:"/pages/service/service"},{text:"记录",url:"/pages/record/record"},{text:"个人",url:"/pages/user/user"}]);function U(){F.toggleLang()}function j(e){return F.convertText(e)}function D(){_({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:e=>{x({url:A.value+"/fileUploadAndDownload/upload",filePath:e.tempFilePaths[0],name:"file",header:{"x-token":w.value},success:e=>{const s=JSON.parse(e.data);I.value=A.value+"/"+s.data.file.url}}),f({title:j("头像已更新"),icon:"success"})}})}function P(){d({title:j("修改用户名"),editable:!0,placeholderText:j("请输入新用户名"),success:e=>{e.confirm&&e.content&&(T.value=e.content,a({url:A.value+"/user/setSelfInfo",method:"PUT",header:{"x-token":w.value},data:{nickName:e.content}}),f({title:j("用户名已更新"),icon:"success"}))}})}function S(){d({title:j("确认退出"),content:j("确定要退出当前账号吗？"),success:e=>{e.confirm&&(m("token",""),p({url:"/pages/index/index"}))}})}return(e,s)=>{const a=c,d=v,f=g,m=b(t("uni-icons"),k),p=b(t("FooterNav"),z);return i(),l(a,{class:"home-page"},{default:o(()=>[u(a,{class:"bg-decoration"},{default:o(()=>[u(a,{class:"bg-blob blob-1"}),u(a,{class:"bg-blob blob-2"})]),_:1}),u(a,{class:"user-info-card"},{default:o(()=>[u(a,{class:"avatar-section"},{default:o(()=>[u(a,{class:"avatar-container"},{default:o(()=>[u(d,{class:"avatar",src:I.value,mode:"widthFix"},null,8,["src"])]),_:1}),u(a,{class:"user-basic"},{default:o(()=>[u(f,{class:"user-name"},{default:o(()=>[r(n(j(T.value)),1)]),_:1}),u(f,{class:"user-id"},{default:o(()=>[r(n(j("ID:"))+" "+n(N.value),1)]),_:1})]),_:1})]),_:1}),u(a,{class:"function-list"},{default:o(()=>[u(a,{class:"function-item",onClick:D},{default:o(()=>[u(m,{type:"image",size:"20",color:"#4A35A8",class:"item-icon"}),u(f,{class:"item-text"},{default:o(()=>[r(n(j("修改头像")),1)]),_:1}),u(m,{type:"right",size:"18",color:"#999",class:"item-arrow"})]),_:1}),u(a,{class:"function-item",onClick:P},{default:o(()=>[u(m,{type:"edit",size:"20",color:"#4A35A8",class:"item-icon"}),u(f,{class:"item-text"},{default:o(()=>[r(n(j("修改用户名")),1)]),_:1}),u(m,{type:"right",size:"18",color:"#999",class:"item-arrow"})]),_:1}),u(a,{class:"function-item",onClick:U},{default:o(()=>[u(m,{type:"translate",size:"20",color:"#4A35A8",class:"item-icon"}),u(f,{class:"item-text"},{default:o(()=>[r(n(j("繁体/简体切换")),1)]),_:1}),u(m,{type:"right",size:"18",color:"#999",class:"item-arrow"})]),_:1}),u(a,{class:"function-item logout-item",onClick:S},{default:o(()=>[u(m,{type:"logout",size:"20",color:"#F53F3F",class:"item-icon"}),u(f,{class:"item-text logout-text"},{default:o(()=>[r(n(j("退出登录")),1)]),_:1}),u(m,{type:"right",size:"18",color:"#999",class:"item-arrow"})]),_:1})]),_:1})]),_:1}),u(p,{navs:C.value},null,8,["navs"])]),_:1})}}},[["__scopeId","data-v-a53ff133"]]);export{F as default};
